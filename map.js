// Generated by CoffeeScript 1.3.3
(function() {
  var geocoder, image, latlng, map, myMarker, myOptions;

  latlng = new google.maps.LatLng(35.757794, 139.876819);

  myOptions = {
    zoom: 16,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true
  };

  image = new google.maps.MarkerImage('img/bluedot.png', null, null, new google.maps.Point(8, 8), new google.maps.Size(17, 17));

  myMarker = null;

  map = new google.maps.Map(document.getElementById("map"), myOptions);

  geocoder = new google.maps.Geocoder();

  $('#gps').on('click', function() {
    return navigator.geolocation.getCurrentPosition(function(position) {
      var latLng;
      latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
      if (myMarker) {
        myMarker.setPosition(latLng);
      } else {
        myMarker = new google.maps.Marker({
          flat: true,
          icon: image,
          map: map,
          optimized: false,
          position: latLng,
          title: 'I might be here',
          visible: true
        });
      }
      return map.setCenter(latLng);
    });
  });

  $('#address').on('change', function() {
    return geocoder.geocode({
      address: this.value
    }, function(result, status) {
      if (status === google.maps.GeocoderStatus.OK) {
        return map.setCenter(result[0].geometry.location);
      } else {
        return alert(status);
      }
    });
  });

}).call(this);
